{"ast":null,"code":"import _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/adrianthompson/Documents/with-redux-app/HOCs/Session/with-authorization.js\";\nvar __jsx = React.createElement;\nimport React from 'react'; // import { withRouter } from 'react-router-dom';\n\nimport { compose } from 'redux';\nimport { withFirebase } from '../'; // import * as ROUTES from '../../constants/routes';\n\nimport { AuthUserContext } from '.';\n\nvar withAuthorization = function withAuthorization(condition) {\n  return function (Component) {\n    var WithAuthorization =\n    /*#__PURE__*/\n    function (_React$Component) {\n      _inherits(WithAuthorization, _React$Component);\n\n      function WithAuthorization() {\n        _classCallCheck(this, WithAuthorization);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(WithAuthorization).apply(this, arguments));\n      }\n\n      _createClass(WithAuthorization, [{\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n          this.listener = this.props.firebase.auth.onAuthStateChanged(function (authUser) {\n            console.log('authUser ', authUser);\n\n            if (!condition(authUser)) {\n              Router.push('/signin');\n            }\n          });\n        }\n      }, {\n        key: \"componentWillUnmount\",\n        value: function componentWillUnmount() {\n          this.listener();\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          var _this = this;\n\n          return __jsx(AuthUserContext.Consumer, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 29\n            },\n            __self: this\n          }, function (authUser) {\n            return condition(authUser) ? __jsx(Component, _extends({}, _this.props, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 31\n              },\n              __self: this\n            })) : null;\n          });\n        }\n      }]);\n\n      return WithAuthorization;\n    }(React.Component);\n\n    return compose( // withRouter,\n    withFirebase)(WithAuthorization);\n  };\n};\n\nexport default withAuthorization;","map":{"version":3,"sources":["/home/adrianthompson/Documents/with-redux-app/HOCs/Session/with-authorization.js"],"names":["React","compose","withFirebase","AuthUserContext","withAuthorization","condition","Component","WithAuthorization","listener","props","firebase","auth","onAuthStateChanged","authUser","console","log","Router","push"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB,C,CACA;;AACA,SAASC,OAAT,QAAwB,OAAxB;AAEA,SAASC,YAAT,QAA6B,KAA7B,C,CACA;;AACA,SAASC,eAAT,QAAgC,GAAhC;;AAEA,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,CAAAC,SAAS;AAAA,SAAI,UAAAC,SAAS,EAAI;AAAA,QAC5CC,iBAD4C;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,4CAG5B;AAClB,eAAKC,QAAL,GAAgB,KAAKC,KAAL,CAAWC,QAAX,CAAoBC,IAApB,CAAyBC,kBAAzB,CACd,UAAAC,QAAQ,EAAI;AACRC,YAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBF,QAAzB;;AACF,gBAAI,CAACR,SAAS,CAACQ,QAAD,CAAd,EAA0B;AACxBG,cAAAA,MAAM,CAACC,IAAP,CAAY,SAAZ;AACD;AACF,WANa,CAAhB;AAQD;AAZ+C;AAAA;AAAA,+CAczB;AACrB,eAAKT,QAAL;AACD;AAhB+C;AAAA;AAAA,iCAkBvC;AAAA;;AACP,iBACE,MAAC,eAAD,CAAiB,QAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACI,UAAAK,QAAQ;AAAA,mBACRR,SAAS,CAACQ,QAAD,CAAT,GAAsB,MAAC,SAAD,eAAe,KAAI,CAACJ,KAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAtB,GAAsD,IAD9C;AAAA,WADZ,CADF;AAOD;AA1B+C;;AAAA;AAAA,MAClBT,KAAK,CAACM,SADY;;AA6BlD,WAAOL,OAAO,EACZ;AACAC,IAAAA,YAFY,CAAP,CAGLK,iBAHK,CAAP;AAID,GAjCkC;AAAA,CAAnC;;AAmCA,eAAeH,iBAAf","sourcesContent":["import React from 'react';\n// import { withRouter } from 'react-router-dom';\nimport { compose } from 'redux';\n\nimport { withFirebase } from '../';\n// import * as ROUTES from '../../constants/routes';\nimport { AuthUserContext } from '.';\n\nconst withAuthorization = condition => Component => {\n  class WithAuthorization extends React.Component {\n      \n    componentDidMount() {\n      this.listener = this.props.firebase.auth.onAuthStateChanged(\n        authUser => {\n            console.log('authUser ', authUser);\n          if (!condition(authUser)) {\n            Router.push('/signin');\n          }\n        },\n      );\n    }\n\n    componentWillUnmount() {\n      this.listener();\n    }\n\n    render() {\n      return (\n        <AuthUserContext.Consumer>\n          { authUser => \n            condition(authUser) ? <Component {...this.props} /> : null\n          }\n        </AuthUserContext.Consumer>\n      );\n    }\n  }\n\n  return compose(\n    // withRouter,\n    withFirebase,\n  )(WithAuthorization);\n};\n\nexport default withAuthorization;"]},"metadata":{},"sourceType":"module"}