{"version":3,"file":"static/webpack/static/development/pages/home.js.fafca23d20c575bb4570.hot-update.js","sources":["webpack:///./HOCs/with-auth.js"],"sourcesContent":["import React from 'react';\nimport { withFirebase } from '.';\nimport * as cache from '../lib/cache';\nimport Router from 'next/router';\n\nconst withAuthentication = Component => {\n  class withAuthentication extends React.Component {\n    constructor(props) {\n      super(props);\n      this.state = {\n        authUser: null\n      };\n    }\n\n    componentDidMount() {\n      this.listener = this.props.firebase.auth.onAuthStateChanged(authUser => {\n        authUser\n          ? this.ifAuthSaveToCache(authUser)\n          : this.ifNotAuthRouteToSignIn();\n      });\n      // this.ifNotAuthRouteToSignIn();\n    }\n\n    ifNotAuthRouteToSignIn = () => {\n      this.setState({\n        authUser: null\n      });\n      Router.push('/signin');\n    };\n\n    ifAuthSaveToCache = authUser => {\n      this.setState({ authUser });\n      return cache.saveToCache('uid', authUser.uid);\n    };\n\n    componentWillUnmount() {\n      this.listener();\n    }\n\n    signOut = () => {\n      cache.clearFromCache('uid', '');\n      Router.push('/signin');\n    };\n\n    signIn = (email, password) => {\n      this.props.firebase\n        .doSignInWithEmailAndPassword(email, password)\n        .then(res => {\n          const { uid } = res.user;\n          cache.saveToCache('uid', uid);\n          return uid;\n        })\n        .catch(error => {\n          this.setState({ error });\n        });\n    };\n\n    render() {\n      const { authUser } = this.state;\n      return (\n        <Component {...this.props} authUser={authUser} signOut={this.signOut} />\n      );\n    }\n  }\n\n  return withFirebase(withAuthentication);\n};\n\nexport default withAuthentication;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAiBA;AACA;AADA;AACA;AAEA;AACA;AACA;AAtBA;AAwBA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AA3BA;AAiCA;AACA;AACA;AACA;AApCA;AAsCA;AAEA;AAEA;AACA;AACA;AAEA;AAAA;AAAA;AACA;AACA;AACA;AA/CA;AACA;AADA;AAFA;AAKA;AACA;AARA;AAAA;AAAA;AASA;AACA;AAAA;AACA;AAGA;AAEA;AAhBA;AAAA;AAAA;AA+BA;AACA;AAhCA;AAAA;AAAA;AAoDA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAzDA;AACA;AADA;AAAA;AACA;AA2DA;AACA;AACA;AACA;;;;A","sourceRoot":""}